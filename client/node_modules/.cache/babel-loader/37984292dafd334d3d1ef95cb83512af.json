{"ast":null,"code":"import _regeneratorRuntime from \"/Users/corrinepusillo/Desktop/new/axolotl/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/corrinepusillo/Desktop/new/axolotl/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/Users/corrinepusillo/Desktop/new/axolotl/client/src/pages/Search.js\";\nimport React, { Component } from 'react';\nimport { Container, Card, Button, InputGroup, FormControl, ProgressBar } from 'react-bootstrap';\nimport { FaSearchLocation, FaCheckSquare } from 'react-icons/fa';\nimport API from \"../utils/API\";\nimport SearchResults from \"../components/SearchResults\";\nimport EventsResults from \"../components/EventsResults\";\nimport BestResults from \"../components/BestResults\";\nimport './search.css';\nimport firebase from \"../firebase\";\n\nclass Search extends Component {\n  constructor(...args) {\n    var _this;\n\n    super(...args);\n    _this = this;\n    this.state = {\n      food: [],\n      events: [],\n      results: [],\n      query: \"\",\n      lat: \"\",\n      lon: \"\",\n      searchMode: \"restaurants\",\n      bg1color: \"\",\n      bgcolor: \"\",\n      currentUser: \"\",\n      clicked: false\n    };\n\n    this.getCurrentUser = () => {\n      var user = firebase.auth().currentUser.email;\n      console.log(user);\n      this.setState({\n        currentUser: user\n      });\n    };\n\n    this.handleInputChange = event => {\n      this.setState({\n        query: event.target.value\n      });\n      const _this$state = this.state,\n            food = _this$state.food,\n            events = _this$state.events,\n            query = _this$state.query,\n            results = _this$state.results,\n            searchMode = _this$state.searchMode;\n\n      if (searchMode === \"restaurants\") {\n        if (query == \"\") {\n          return;\n        } else {\n          const results = food.restaurants.filter(f => f.restaurant.cuisines.includes(query));\n          this.setState({\n            results\n          });\n          console.log(results);\n        }\n      } else if (searchMode === \"events\") {\n        return;\n      }\n    };\n\n    this.handleButtonClick = () => {\n      this.setState({\n        clicked: true\n      });\n    };\n\n    this.handleEventButtonClick = () => {\n      this.setState({\n        searchMode: \"events\"\n      });\n      this.setState({\n        bgColor: \"darkblue\"\n      });\n      this.setState({\n        bg1Color: \"\"\n      });\n      this.loadEvents();\n      this.setState({\n        food: \"\"\n      });\n    };\n\n    this.handleRestaurantsButtonClick = () => {\n      this.setState({\n        searchMode: \"restaurants\"\n      });\n      this.setState({\n        bg1Color: \"darkblue\"\n      });\n      this.setState({\n        bgColor: \"\"\n      });\n      this.loadRestaurants(this.state.latitude, this.state.longitude);\n      this.setState({\n        events: \"\"\n      });\n    };\n\n    this.loadRestaurants = () => {\n      API.getRestaurants(this.state.lat, this.state.lon).then(res => {\n        this.setState({\n          food: res.data\n        }); //console.log(this.state.food)\n      }).catch(err => console.log(err));\n    };\n\n    this.loadEvents = () => {\n      API.getEvents().then(res => {\n        this.setState({\n          events: res.data\n        });\n        console.log(this.state.events);\n      }).catch(err => console.log(err));\n    };\n\n    this.getLocation = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (navigator.geolocation) {\n              navigator.geolocation.getCurrentPosition(_this.showPosition);\n            } else {\n              console.log(\"Geolocation is not supported by this browser\");\n            }\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n\n    this.showPosition = position => {\n      let lat = position.coords.latitude;\n      let lon = position.coords.longitude;\n      this.setGeoLocation(lat, lon);\n    };\n\n    this.setGeoLocation = (lat, lon) => {\n      this.setState({\n        lat: lat,\n        lon: lon\n      });\n      console.log(\"Latitude: \".concat(lat));\n      console.log(\"Longitude: \".concat(lon));\n    };\n\n    this.saveFoods = foodData => {\n      API.saveFoods({\n        id: foodData.id,\n        name: foodData.name,\n        cuisines: foodData.cuisines,\n        address: foodData.address,\n        menu_url: foodData.menu_url,\n        timings: foodData.timings,\n        reservation: \"\",\n        notes: \"\",\n        user: this.state.currentUser\n      });\n    };\n\n    this.saveEvents = eventsData => {\n      API.saveEvents({\n        id: eventsData.id,\n        title: eventsData.title,\n        type: eventsData.type,\n        venue: eventsData.venue,\n        address: eventsData.address,\n        extended_address: eventsData.extended_address,\n        url: eventsData.url,\n        date: eventsData.date,\n        notes: \"\"\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getLocation();\n    this.getCurrentUser();\n  }\n\n  render() {\n    // console.log(this.state.searchMode)\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Container, {\n      id: \"main-container\",\n      className: \"glassy-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Card.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"w-100 text-center mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }\n    }, \"Search for local food & entertainment\")), /*#__PURE__*/React.createElement(Card.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      style: {\n        backgroundColor: this.state.bg1Color\n      },\n      onClick: this.handleRestaurantsButtonClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }\n    }, \"Restaurants\"), /*#__PURE__*/React.createElement(Button, {\n      style: {\n        backgroundColor: this.state.bgColor\n      },\n      onClick: this.handleEventButtonClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }\n    }, \"Events\"), /*#__PURE__*/React.createElement(InputGroup, {\n      className: \"mb-3\",\n      onChange: this.handleInputChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FormControl, {\n      className: \"wrapper\",\n      placeholder: \"Tacos\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(InputGroup.Append, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.handleButtonClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FaSearchLocation, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 18\n      }\n    })))))), /*#__PURE__*/React.createElement(Card, {\n      className: \"mt-2 p-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 13\n      }\n    }, this.state.food.length !== 0 ? /*#__PURE__*/React.createElement(SearchResults, {\n      results: this.state.food,\n      saveFoods: this.saveFoods,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 18\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }\n    })), this.state.events.length !== 0 ? /*#__PURE__*/React.createElement(EventsResults, {\n      results: this.state.events,\n      saveEvents: this.saveEvents,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 18\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }\n    })), !this.state.lat && !this.state.lon ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }\n    }, \"Hold on, we're looking for your location\"), /*#__PURE__*/React.createElement(ProgressBar, {\n      variant: \"success\",\n      animated: true,\n      now: 100,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 17\n      }\n    })) : /*#__PURE__*/React.createElement(\"p\", {\n      className: \"green\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FaCheckSquare, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 38\n      }\n    }), \"  Ready to search!\"))));\n  }\n\n}\n\nexport default Search;","map":{"version":3,"sources":["/Users/corrinepusillo/Desktop/new/axolotl/client/src/pages/Search.js"],"names":["React","Component","Container","Card","Button","InputGroup","FormControl","ProgressBar","FaSearchLocation","FaCheckSquare","API","SearchResults","EventsResults","BestResults","firebase","Search","state","food","events","results","query","lat","lon","searchMode","bg1color","bgcolor","currentUser","clicked","getCurrentUser","user","auth","email","console","log","setState","handleInputChange","event","target","value","restaurants","filter","f","restaurant","cuisines","includes","handleButtonClick","handleEventButtonClick","bgColor","bg1Color","loadEvents","handleRestaurantsButtonClick","loadRestaurants","latitude","longitude","getRestaurants","then","res","data","catch","err","getEvents","getLocation","navigator","geolocation","getCurrentPosition","showPosition","position","coords","setGeoLocation","saveFoods","foodData","id","name","address","menu_url","timings","reservation","notes","saveEvents","eventsData","title","type","venue","extended_address","url","date","componentDidMount","render","backgroundColor","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Container, Card, Button, InputGroup, FormControl, ProgressBar } from 'react-bootstrap'\nimport { FaSearchLocation, FaCheckSquare } from 'react-icons/fa'\nimport API from \"../utils/API\"\nimport SearchResults from \"../components/SearchResults\"\nimport EventsResults from \"../components/EventsResults\"\nimport BestResults from \"../components/BestResults\"\nimport './search.css';\nimport firebase from \"../firebase\"\n\nclass Search extends Component {\n    state = { \n        food: [],\n        events: [],\n        results: [],\n        query: \"\",\n        lat: \"\",\n        lon: \"\",\n        searchMode: \"restaurants\", \n        bg1color: \"\",\n        bgcolor: \"\",\n        currentUser: \"\",\n        clicked: false\n    }\n\n    componentDidMount(){\n        this.getLocation();\n        this.getCurrentUser();\n    }\n\n    getCurrentUser = () => {\n        var user = firebase.auth().currentUser.email;\n        console.log(user)\n        this.setState({currentUser: user})\n    }\n\n    \n\n    // ==== Handlers ==== //        \n\n    handleInputChange = event => {\n        this.setState({query: event.target.value})\n        const { food, events, query, results, searchMode} = this.state;\n\n        if (searchMode === \"restaurants\") {\n\n            if (query == \"\"){\n                return;\n            }\n            else {\n                const results = food.restaurants.filter(f => \n                    f.restaurant.cuisines.includes(query));\n                this.setState({results})\n                console.log(results)\n            }\n        }\n\n        else if (searchMode === \"events\") {\n            return;\n        }\n\n    }\n    \n    handleButtonClick = () => {\n        this.setState({clicked:true})\n    }\n    \n    handleEventButtonClick = () => {\n        this.setState({searchMode: \"events\"})\n        this.setState({bgColor: \"darkblue\"})\n        this.setState({bg1Color: \"\"})\n        this.loadEvents();\n        this.setState({food:\"\"})\n    }\n\n    handleRestaurantsButtonClick = () => {\n        this.setState({searchMode: \"restaurants\"})\n        this.setState({bg1Color: \"darkblue\"})\n        this.setState({bgColor: \"\"})\n        this.loadRestaurants(this.state.latitude, this.state.longitude)\n        this.setState({events:\"\"})\n    }\n\n    \n    // ==== API CALLS ==== //\n    \n    // ZOMATO API CALL\n    loadRestaurants = () => {\n        API.getRestaurants(this.state.lat, this.state.lon)\n          .then(res => {this.setState({food: res.data})\n              //console.log(this.state.food)\n        }).catch(err => console.log(err)) };\n\n    // SEATGEEK API CALL\n     loadEvents = () => {\n         API.getEvents()\n         .then (res=> {this.setState({events: res.data}) \n        console.log(this.state.events)\n         }).catch(err =>console.log(err))\n};\n\n    // ==== GEOLOCATION METHODS ==== //\n    \n    getLocation = async () => {\n        if (navigator.geolocation) {\n            navigator.geolocation.getCurrentPosition(this.showPosition);\n        } else {\n            console.log(\"Geolocation is not supported by this browser\")\n        }\n    }\n\n    showPosition = (position) => {\n        let lat = position.coords.latitude;\n        let lon = position.coords.longitude;\n        this.setGeoLocation(lat,lon)\n    }   \n\n    setGeoLocation = (lat, lon) => {\n        this.setState({lat: lat, lon: lon})\n        console.log(`Latitude: ${lat}`);\n        console.log(`Longitude: ${lon}`);\n    }\n\n        // ==== INTERNAL API METHODS ==== //\n\n        saveFoods = foodData => {\n            API.saveFoods({\n                id: foodData.id,\n                name: foodData.name,\n                cuisines: foodData.cuisines,\n                address: foodData.address,\n                menu_url: foodData.menu_url,\n                timings: foodData.timings,\n                reservation: \"\",\n                notes: \"\",\n                user: this.state.currentUser\n            })\n        }\n\n        saveEvents = eventsData => {\n            API.saveEvents ({\n                id: eventsData.id,\n                title: eventsData.title,\n                type: eventsData.type,\n                venue: eventsData.venue,\n                address: eventsData.address,\n                extended_address: eventsData.extended_address,\n                url: eventsData.url,\n                date: eventsData.date,\n                notes: \"\"\n            })\n        }\n    \n        \n\nrender(){\n    // console.log(this.state.searchMode)\n\n    return (\n        <>\n            <Container id=\"main-container\" className=\"glassy-text\" >\n            <Card>\n                <Card.Header>\n                    <h2 className=\"w-100 text-center mt-2\">Search for local food & entertainment</h2>\n                </Card.Header>\n                <Card.Body>\n                <Button  style={{backgroundColor: this.state.bg1Color}}\n           onClick={this.handleRestaurantsButtonClick}>\n                    Restaurants\n                </Button>\n                <Button style={{backgroundColor: this.state.bgColor}}\n           onClick={this.handleEventButtonClick}>\n                    Events\n                </Button>\n                <InputGroup className=\"mb-3\" onChange={this.handleInputChange}>\n                <FormControl className=\"wrapper\"\n                placeholder=\"Tacos\"\n                />\n                <InputGroup.Append>\n                <Button \n                    variant=\"secondary\"\n                    onClick={this.handleButtonClick}\n                ><FaSearchLocation />\n                </Button>\n                </InputGroup.Append>\n                </InputGroup>\n                </Card.Body>\n\n            </Card>\n\n            <Card className=\"mt-2 p-3\">\n            \n            {this.state.food.length !== 0 ? (\n                 <SearchResults \n                     results={this.state.food} \n                     saveFoods={this.saveFoods}\n                 /> \n            ) : (\n                <div>\n                <p></p>\n\n            </div>\n            )}\n\n{this.state.events.length !== 0 ? (\n                 <EventsResults \n                     results={this.state.events} \n                     saveEvents={this.saveEvents}\n                 /> \n            ) : (\n                <div>\n                <p></p>\n\n            </div>\n            )}\n\n\n\n            {!this.state.lat && !this.state.lon ? (\n                <div>\n                <p>Hold on, we're looking for your location</p>\n                <ProgressBar variant=\"success\" animated now={100} />\n                </div>\n            ) : (\n                <p className=\"green\"><FaCheckSquare/>  Ready to search!</p>\n            )}\n                   \n\n            \n            </Card>\n            </Container>\n\n        </>\n    )\n}}\n\nexport default Search\n"]},"metadata":{},"sourceType":"module"}