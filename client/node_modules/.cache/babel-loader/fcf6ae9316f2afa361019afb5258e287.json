{"ast":null,"code":"import _regeneratorRuntime from \"/Users/corrinepusillo/Desktop/AXOLOTL WORKING/axolotl/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/corrinepusillo/Desktop/AXOLOTL WORKING/axolotl/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/Users/corrinepusillo/Desktop/AXOLOTL WORKING/axolotl/client/src/pages/Search.js\";\nimport React, { Component } from 'react';\nimport { Container, Card, Button, InputGroup, FormControl, ProgressBar } from 'react-bootstrap';\nimport { FaSearchLocation, FaCheckSquare } from 'react-icons/fa';\nimport API from \"../utils/API\";\nimport SearchResults from \"../components/SearchResults\";\nimport EventsResults from \"../components/EventsResults\";\nimport SearchBar from \"../components/SearchBar\";\nimport './search.css';\n\nclass Search extends Component {\n  constructor(...args) {\n    var _this;\n\n    super(...args);\n    _this = this;\n    this.state = {\n      food: [],\n      events: [],\n      query: \"\",\n      lat: \"\",\n      lon: \"\",\n      searchMode: \"restaurants\"\n    };\n\n    this.handleButtonClick = () => {//   \n    };\n\n    this.handleEventButtonClick = () => {\n      this.setState({\n        searchMode: \"events\"\n      });\n      this.loadEvents();\n    };\n\n    this.handleRestaurantsButtonClick = () => {\n      this.setState({\n        searchMode: \"restaurants\"\n      });\n      this.loadRestaurants(this.state.latitude, this.state.longitude);\n    };\n\n    this.loadRestaurants = () => {\n      API.getRestaurants(this.state.lat, this.state.lon).then(res => {\n        this.setState({\n          food: res.data\n        }); //console.log(this.state.food)\n      }).catch(err => console.log(err));\n    };\n\n    this.loadEvents = () => {\n      API.getEvents().then(res => {\n        this.setState({\n          events: res.data\n        }); // console.log(this.state.events)\n      }).catch(err => console.log(err));\n    };\n\n    this.getLocation = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (navigator.geolocation) {\n              navigator.geolocation.getCurrentPosition(_this.showPosition);\n            } else {\n              console.log(\"Geolocation is not supported by this browser\");\n            }\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n\n    this.showPosition = position => {\n      let lat = position.coords.latitude;\n      let lon = position.coords.longitude;\n      this.setGeoLocation(lat, lon);\n    };\n\n    this.setGeoLocation = (lat, lon) => {\n      this.setState({\n        lat: lat,\n        lon: lon\n      });\n      console.log(\"Latitude: \".concat(lat));\n      console.log(\"Longitude: \".concat(lon));\n    };\n\n    this.saveFoods = foodData => {\n      API.saveFoods({\n        id: foodData.id,\n        name: foodData.name,\n        cuisines: foodData.cuisines,\n        address: foodData.address,\n        menu_url: foodData.menu_url,\n        timings: foodData.timings\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getLocation();\n  } // ==== OnClick Handlers ==== //\n\n\n  render() {\n    // console.log(this.state.searchMode)\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Container, {\n      id: \"main-container\",\n      className: \"glassy-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Card.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"w-100 text-center mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }\n    }, \"Search for local food & entertainment\")), /*#__PURE__*/React.createElement(Card.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: this.handleRestaurantsButtonClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }\n    }, \"Restaurants\"), /*#__PURE__*/React.createElement(Button, {\n      onClick: this.handleEventButtonClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }, \"Events\"))), /*#__PURE__*/React.createElement(Card, {\n      className: \"mt-2 p-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }, this.state.food.length !== 0 ? ( /*#__PURE__*/React.createElement(SearchBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 31\n      }\n    }, \"Hello\") // ,\n    //  <SearchResults \n    //      results={this.state.food} \n    //      saveFoods={this.saveFoods}\n    //  /> \n    ) :\n    /*#__PURE__*/\n    React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }, \"Nothing to see here, try looking for some food!\")), !this.state.lat && !this.state.lon ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }\n    }, \"Hold on, we're looking for your location\"), /*#__PURE__*/React.createElement(ProgressBar, {\n      variant: \"success\",\n      animated: true,\n      now: 100,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }\n    })) : /*#__PURE__*/React.createElement(\"p\", {\n      className: \"green\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FaCheckSquare, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 38\n      }\n    }), \"  Ready to search!\"), this.state.events.length !== 0 ? /*#__PURE__*/React.createElement(EventsResults, {\n      results: this.state.events,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 18\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }\n    }, \"Nothing to see here, try looking for something to do!\")))));\n  }\n\n}\n\nexport default Search;","map":{"version":3,"sources":["/Users/corrinepusillo/Desktop/AXOLOTL WORKING/axolotl/client/src/pages/Search.js"],"names":["React","Component","Container","Card","Button","InputGroup","FormControl","ProgressBar","FaSearchLocation","FaCheckSquare","API","SearchResults","EventsResults","SearchBar","Search","state","food","events","query","lat","lon","searchMode","handleButtonClick","handleEventButtonClick","setState","loadEvents","handleRestaurantsButtonClick","loadRestaurants","latitude","longitude","getRestaurants","then","res","data","catch","err","console","log","getEvents","getLocation","navigator","geolocation","getCurrentPosition","showPosition","position","coords","setGeoLocation","saveFoods","foodData","id","name","cuisines","address","menu_url","timings","componentDidMount","render","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Container, Card, Button, InputGroup, FormControl, ProgressBar } from 'react-bootstrap'\nimport { FaSearchLocation, FaCheckSquare } from 'react-icons/fa'\nimport API from \"../utils/API\"\nimport SearchResults from \"../components/SearchResults\"\nimport EventsResults from \"../components/EventsResults\"\nimport SearchBar from \"../components/SearchBar\"\nimport './search.css';\n\nclass Search extends Component {\n    state = { \n        food: [],\n        events: [],\n        query: \"\",\n        lat: \"\",\n        lon: \"\",\n        searchMode: \"restaurants\", \n    }\n\n    componentDidMount(){\n        this.getLocation();\n    }\n\n    // ==== OnClick Handlers ==== //\n\n    handleButtonClick = () => {\n    //   \n    }\n        \n    \n    \n    handleEventButtonClick = () => {\n        this.setState({searchMode: \"events\"})\n        this.loadEvents()\n    }\n\n    handleRestaurantsButtonClick = () => {\n        this.setState({searchMode: \"restaurants\"})\n        this.loadRestaurants(this.state.latitude, this.state.longitude)\n    }\n    // ==== API CALLS ==== //\n    \n    // ZOMATO API CALL\n    loadRestaurants = () => {\n        API.getRestaurants(this.state.lat, this.state.lon)\n          .then(res => {this.setState({food: res.data})\n              //console.log(this.state.food)\n        }).catch(err => console.log(err)) };\n\n     loadEvents = () => {\n         API.getEvents()\n         .then (res=> {this.setState({events: res.data}) \n                // console.log(this.state.events)\n         }).catch(err =>console.log(err))\n};\n\n    // ==== GEOLOCATION METHODS ==== //\n    \n    getLocation = async () => {\n        if (navigator.geolocation) {\n            navigator.geolocation.getCurrentPosition(this.showPosition);\n        } else {\n            console.log(\"Geolocation is not supported by this browser\")\n        }\n    }\n\n    showPosition = (position) => {\n        let lat = position.coords.latitude;\n        let lon = position.coords.longitude;\n        this.setGeoLocation(lat,lon)\n    }   \n\n    setGeoLocation = (lat, lon) => {\n        this.setState({lat: lat, lon: lon})\n        console.log(`Latitude: ${lat}`);\n        console.log(`Longitude: ${lon}`);\n    }\n\n        // ==== INTERNAL API METHODS ==== //\n\n        saveFoods = foodData => {\n            API.saveFoods({\n                id: foodData.id,\n                name: foodData.name,\n                cuisines: foodData.cuisines,\n                address: foodData.address,\n                menu_url: foodData.menu_url,\n                timings: foodData.timings\n            })\n        }\n    \n        \n\nrender(){\n    // console.log(this.state.searchMode)\n\n    return (\n        <>\n            <Container id=\"main-container\" className=\"glassy-text\" >\n            <Card>\n                <Card.Header>\n                    <h2 className=\"w-100 text-center mt-2\">Search for local food & entertainment</h2>\n                </Card.Header>\n                <Card.Body>\n                <Button onClick={this.handleRestaurantsButtonClick}>\n                    Restaurants\n                </Button>\n                <Button onClick={this.handleEventButtonClick}>\n                    Events\n                </Button>\n\n                </Card.Body>\n\n            </Card>\n\n            <Card className=\"mt-2 p-3\">\n            {this.state.food.length !== 0 ? (\n                <SearchBar/>, <p>Hello</p>\n                // ,\n                //  <SearchResults \n                //      results={this.state.food} \n                //      saveFoods={this.saveFoods}\n                //  /> \n            ) : (\n                <div>\n                <p>Nothing to see here, try looking for some food!</p>\n\n            </div>\n            )}\n            {!this.state.lat && !this.state.lon ? (\n                <div>\n                <p>Hold on, we're looking for your location</p>\n                <ProgressBar variant=\"success\" animated now={100} />\n                </div>\n            ) : (\n                <p className=\"green\"><FaCheckSquare/>  Ready to search!</p>\n            )}\n            {this.state.events.length !== 0 ? (\n                 <EventsResults \n                     results={this.state.events} \n                 /> \n            ) : (\n                <div>\n                <p>Nothing to see here, try looking for something to do!</p>\n\n            </div>\n            )}\n            \n            </Card>\n            </Container>\n\n        </>\n    )\n}}\n\nexport default Search\n"]},"metadata":{},"sourceType":"module"}